
<!DOCTYPE html>

<html lang="fr">
<head>
<meta charset="utf-8"/>
<title>Inscription - Tennis Club de Pimprez</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<style>
        :root {
            --header-color: #4CAF50;
            --button-color: #4CAF50;
        }
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        .header {
            background-color: var(--header-color);
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        .header img {
            height: 100px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 6px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .section-title {
            color: var(--header-color);
            border-left: 4px solid var(--header-color);
            padding-left: 10px;
            margin: 30px 0 20px;
        }
        #confirmation-message {
            display: none;
            background: #d4edda;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
            color: #155724;
            text-align: center;
        }
        .btn-success {
            background-color: var(--button-color);
            border-color: var(--button-color);
        }
    </style>
</head>
<body>
<div class="header">
<img alt="Tennis Club de Pimprez" src="images/logo.jpg"/>
<h1>Tennis Club de Pimprez</h1>
<p>Formulaire d'inscription - Saison 2025-2026</p>
</div>
<div class="container">
<div id="confirmation-message">
<h3>Merci !</h3>
<p>Vos informations ont bien été transmises.</p>
<button class="btn btn-success mt-3" id="btn-new-inscription">Nouvelle inscription</button>
</div>
<form id="inscriptionForm">
<div id="membres-wrapper">
<div class="membre-bloc">
<h3 class="section-title">Informations personnelles</h3>
<div class="mb-3">
<label for="civilite">Civilité</label>
<select class="form-select" name="civilite[1]">
<option value="">Sélectionnez</option>
<option value="M.">M.</option>
<option value="Mme">Mme</option>
<option value="Autre">Autre</option>
</select>
</div>
<div class="mb-3">
<label>Nom</label>
<input class="form-control" name="nom[1]" required=""/>
</div>
<div class="mb-3">
<label>Prénom</label>
<input class="form-control" name="prenom[1]" required=""/>
</div>
<div class="mb-3">
<label>Date de naissance</label>
<input class="form-control" name="date_naissance[1]" type="date"/>
</div>
<h3 class="section-title">Coordonnées</h3>
<div class="mb-3">
<label>Adresse</label>
<input class="form-control" name="adresse[1]"/>
</div>
<div class="mb-3">
<label>Code postal</label>
<input class="form-control" name="code_postal[1]"/>
</div>
<div class="mb-3">
<label>Ville</label>
<input class="form-control" name="ville[1]"/>
</div>
<div class="mb-3">
<label>Email</label>
<input class="form-control" name="email[1]" type="email"/>
</div>
<div class="mb-3">
<label>Téléphone</label>
<input class="form-control" name="tel_mobile[1]" type="tel"/>
</div>
</div>
</div>
<button class="btn btn-outline-primary mt-3" id="btn-ajouter-membre" type="button">Ajouter un membre</button>
<button class="btn btn-primary mt-3" type="submit">Envoyer</button>
</form>
</div>
<script>
const confirmationMessage = document.getElementById("confirmation-message");
confirmationMessage.style.display = "none";

const form = document.getElementById("inscriptionForm");
const membreContainer = document.getElementById("membres-wrapper");
let membreIndex = 1;

const champsFamille = ["adresse", "code_postal", "ville", "email", "tel_mobile", "tel_fixe"];

function ajouterMembre(preRemplir = true) {
    const original = document.querySelector(".membre-bloc");
    const clone = original.cloneNode(true);

    membreIndex++;
    clone.querySelectorAll("input, select").forEach(input => {
        input.name = input.name.replace(/\[\d+\]/, `[${membreIndex}]`);
        input.value = "";
        input.required = false;
        if (preRemplir && champsFamille.includes(input.name.split("[")[0])) {
            const refInput = original.querySelector(`[name='${input.name.split("[")[0]}[1]']`);
            if (refInput) input.value = refInput.value;
        }
    });

    membreContainer.appendChild(clone);
}

form.addEventListener("submit", function(e) {
    e.preventDefault();
    const formData = new FormData(form);
    fetch("https://usebasin.com/f/28ad0c57c7ea", {
        method: "POST",
        body: formData,
    })
    .then(response => {
        if (response.ok) {
            form.style.display = "none";
            confirmationMessage.style.display = "block";
        } else {
            alert("Erreur lors de l'envoi du formulaire. Veuillez réessayer.");
        }
    })
    .catch(error => {
        console.error("Erreur réseau:", error);
        alert("Une erreur s'est produite. Veuillez réessayer plus tard.");
    });
});

document.getElementById("btn-ajouter-membre").addEventListener("click", () => ajouterMembre());

document.getElementById("btn-new-inscription").addEventListener("click", () => {
    confirmationMessage.style.display = "none";
    form.style.display = "block";
    form.reset();
    membreContainer.querySelectorAll(".membre-bloc").forEach((el, i) => { if (i > 0) el.remove(); });
});
</script>
</body>
</html>
